name: "sdpsubarrayleafnode-test"
function: telescope-monitoring
domain: general-monitoring
instances: ["01", "02", "03"]
command: "python3 /app/src/ska_tmc_sdpsubarrayleafnode/sdp_subarray_leaf_node_mid.py"
server:
  name: "sdp_subarray_leaf_node_mid"
  instances:
  {{- range  .Values.coalesced_subarray_devices }}
  - name: "{{ . }}"
    classes:
    - name: "SdpSubarrayLeafNode"
      devices:
      - name: "ska_mid/tm_leaf_node/sdp_subarray{{ . }}"
        properties:
        - name: "SdpSubarrayFQDN"
          values:
          - "mid_sdp/elt/subarray_{{ (split "0" .)._1}}"
        - name: "SkaLevel"
          values:
            - "3"
        - name: "LoggingTargetsDefault"
          values:
            - "tango::logger"
        - name: "LoggingLevelDefault"
          values:
            - "5"
  {{- end }}
depends_on:
  - device: sys/database/2
image:
  registry: "{{.Values.sdpslnmid.image.registry}}"
  image: "{{.Values.sdpslnmid.image.image}}"
  tag: "{{.Values.sdpslnmid.image.tag}}"
  pullPolicy: "{{.Values.sdpslnmid.image.pullPolicy}}"

